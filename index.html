<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Digital Addiction Awareness</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    *{
      margin:0;
      padding:0;
      box-sizing:border-box;
      font-family:'Poppins',sans-serif;
    }

    body{
      background:radial-gradient(circle at top,#2a003f,#000);
      color:rgb(212,0,255);
    }

    .theme-toggle{
      position: fixed;
      top: 15px;
      right: 20px;
      background: linear-gradient(135deg,#facc15,#d4af37);
      color: #000;
      border: none;
      border-radius: 50%;
      width: 45px;
      height: 45px;
      font-size: 20px;
      cursor: pointer;
      box-shadow: 0 0 15px rgba(250,204,21,.6);
      transition: 0.3s ease;
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
      line-height: 1;
    }
    .theme-toggle:hover{transform:scale(1.1)}

    body.light{
      background:#f5f5f5;
      color:#111;
    }
    body.light section,
    body.light .card{
      background:#fdbeff;
      color:#111;
      box-shadow:0 10px 25px rgba(0,0,0,.1);
    }

    section{padding:80px 10%}
    h1,h2,h3{color:#c084fc}
    .gold{color:#facc15}

    .hero{
      min-height:100vh;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      text-align:center;
    }
    .hero h1{font-size:3rem;margin-bottom:20px}
    .hero p{max-width:700px;margin-bottom:30px;color:#ce09ff}

    button{
      padding:14px 30px;
      border:none;
      border-radius:30px;
      cursor:pointer;
      font-weight:600;
      background:linear-gradient(135deg,#facc15,#f59e0b);
      margin:8px;
      transition:.3s ease;
    }
    button:hover{
      transform:scale(1.05);
      box-shadow:0 0 20px rgba(250,204,21,.8);
    }

    .stop-btn{
      background:#000;
      color:yellow;
      border:2px solid #facc15;
    }

    .card{
      background:rgba(0,0,0,.8);
      border-radius:20px;
      padding:40px;
      box-shadow:0 0 30px rgba(0,0,0,.8);
      animation:fadeUp 1s ease;
    }

    @keyframes fadeUp{
      from{opacity:0;transform:translateY(30px)}
      to{opacity:1;transform:translateY(0)}
    }

    .info-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
      gap:30px;
      margin-top:30px;
      text-align:center;
    }

    .image-section{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
      gap:40px;
      align-items:center;
    }
    .image-section img{
      width:100%;
      border-radius:20px;
    }

    #timer{
      font-size:3rem;
      color:#facc15;
      margin:30px auto 10px;
      padding:20px 40px;
      border:3px solid #facc15;
      border-radius:20px;
      display:inline-block;
    }

    .controls{display:none;margin-top:20px}
    #statusMsg{margin-top:10px;color:#60a5fa}

    .stop-box,.streak-box,.badge-tray{
      margin-top:25px;
      padding:15px;
      border:1px solid #facc15;
      border-radius:15px;
      text-align:center;
    }

    #badgeTray{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(90px,1fr));
      gap:20px;
      margin-top:15px;
    }

    .badge-slot{
      width:90px;
      height:90px;
      border-radius:50%;
      border:2px dashed rgba(250,204,21,.5);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:1.8rem;
      color:rgba(250,204,21,.3);
    }

    .badge-slot.unlocked{
      background:radial-gradient(circle at top,#fff3b0,#facc15,#b45309);
      border:3px solid gold;
      color:#000;
      box-shadow:0 0 15px rgba(250,204,21,.8);
      animation:pop .4s ease;
    }

    @keyframes pop{
      0%{transform:scale(.7)}
      70%{transform:scale(1.2)}
      100%{transform:scale(1)}
    }

    #flash{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.9);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:9999;
    }
    #flash h1{color:gold;font-size:2.5rem}

    footer{
      text-align:center;
      padding:30px;
      color:#9ca3af;
      background:#020202;
    }

    @media(max-width:600px){
      h1{font-size:2.2rem}
      section{padding:60px 6%}
    }
    
    a{
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  text-decoration: none;
}
  </style>
</head>

<body>

<button id="themeToggle" class="theme-toggle">üåô</button>

<section class="hero">
  <h1>Break Free from <span class="gold">Digital Addiction</span></h1>
  <p>An interactive awareness & self-discipline platform.</p>
  <button onclick="document.getElementById('info').scrollIntoView()">Start Journey</button>
</section>

<section id="info">
  <div class="card">
    <h2 style="text-align:center;">What is Digital Addiction?</h2>
    <div class="info-grid">
      <div><h3 class="gold">Warning Signs</h3><p>Anxiety, restlessness</p></div>
      <div><h3 class="gold">Effects</h3><p>Stress, low productivity</p></div>
      <div><h3 class="gold">Solution</h3><p>Mindful usage</p></div>
    </div>
  </div>
</section>

<section>
  <div class="image-section">
    <div>
      <h2>Effects</h2>
      <ul>
        <li>Low focus</li>
        <li>Poor sleep</li>
        <li>Mental fatigue</li>
      </ul>
    </div>
    <img src="https://images.unsplash.com/photo-1518770660439-4636190af475">
  </div>
</section>

<section id="challenge">
  <div class="card" style="text-align:center;">
    <h2>1-Hour Digital Detox</h2>

    <button id="acceptBtn" onclick="acceptChallenge()">Accept Challenge</button>

    <div id="timer">60:00</div>
    <div id="statusMsg"></div>

    <div class="controls" id="controls">
      <button class="stop-btn" onclick="manualStop()">Stop</button>
      <button onclick="resumeTimer()">Resume</button>
    </div>

    <div class="stop-box">‚è∏Ô∏è Stops: <span id="stopCount">0</span></div>

    <div class="streak-box">
      üî• Current Streak: <span id="currentStreak">0</span><br>
      üèÜ Best Streak: <span id="bestStreak">0</span><br>
      <button id="resetStreakBtn">Reset Streak</button>
    </div>

    <div class="badge-tray">
      Badges
      <div id="badgeTray">
        <div class="badge-slot" data-badge="30">‚è±Ô∏è</div>
        <div class="badge-slot" data-badge="complete">‚úÖ</div>
        <div class="badge-slot" data-badge="nostop">üíé</div>
        <div class="badge-slot" data-badge="4">üî•</div>
        <div class="badge-slot" data-badge="7">üèÖ</div>
        <div class="badge-slot" data-badge="14">üëë</div>
      </div>
      <button id="clearBadgesBtn">Clear Badges</button>
    </div>
  </div>
</section>

<a href="https://aathipro-web.github.io/Aathi-portfolio/" target="_blank" rel="noopener noreferrer">
  <button type="button">My Portfolio</button>
</a>

<footer>¬© Digital Wellness Initiative ‚Äì Aathishwa S</footer>
<div id="flash"><h1>FOCUS MODE ON</h1></div>

<script>
  const FILE_KEY = location.pathname.replace(/[^a-zA-Z0-9]/g,"_");
  const SafeStorage={
    set:(k,v)=>localStorage.setItem(FILE_KEY+"_"+k,JSON.stringify(v)),
    get:(k,d)=>{const v=localStorage.getItem(FILE_KEY+"_"+k);return v?JSON.parse(v):d},
    remove:(k)=>localStorage.removeItem(FILE_KEY+"_"+k)
  };

  const toggleBtn=document.getElementById("themeToggle");
  if(SafeStorage.get("theme")==="light"){
    document.body.classList.add("light");
    toggleBtn.innerText="‚òÄÔ∏è";
  }
  toggleBtn.onclick=()=>{
    document.body.classList.toggle("light");
    SafeStorage.set("theme",document.body.classList.contains("light")?"light":"dark");
    toggleBtn.innerText=document.body.classList.contains("light")?"‚òÄÔ∏è":"üåô";
  };

  let time=3600,interval=null,running=false;
  let stopCounter=0;

  let currentStreakVal=SafeStorage.get("currentStreak",0);
  let bestStreakVal=SafeStorage.get("bestStreak",0);
  const earnedBadges=SafeStorage.get("badges",[]);

  currentStreak.innerText=currentStreakVal;
  bestStreak.innerText=bestStreakVal;
  updateTimer();restoreBadges();

  function acceptChallenge(){
    acceptBtn.style.display="none";
    controls.style.display="block";
    flash.style.display="flex";
    document.documentElement.requestFullscreen?.();
    setTimeout(()=>flash.style.display="none",2500);
    startTimer();
  }

  function startTimer(){
    if(running) return;
    running=true;
    interval=setInterval(()=>{
      time--;updateTimer();
      if(time===3595) unlockBadge("30");
      if(time<=3595){
        clearInterval(interval);running=false;
        unlockBadge("complete");
        if(stopCounter===0) unlockBadge("nostop");
        updateStreak();
        statusMsg.innerText="‚úÖ Challenge completed!";
      }
    },1000);
  }

  function pauseTimer(msg,count=false){
    if(!running) return;
    clearInterval(interval);running=false;
    if(count){stopCounter++;stopCount.innerText=stopCounter;}
    statusMsg.innerText=msg;
  }

  function manualStop(){pauseTimer("‚è∏Ô∏è Timer paused manually",true);}
  function resumeTimer(){startTimer();}

  function updateTimer(){
    timer.innerText=`${Math.floor(time/60)}:${String(time%60).padStart(2,"0")}`;
  }

  function updateStreak(){
    currentStreakVal++;
    bestStreakVal=Math.max(bestStreakVal,currentStreakVal);
    SafeStorage.set("currentStreak",currentStreakVal);
    SafeStorage.set("bestStreak",bestStreakVal);
    currentStreak.innerText=currentStreakVal;
    bestStreak.innerText=bestStreakVal;
    if([4,7,14].includes(currentStreakVal)) unlockBadge(String(currentStreakVal));
  }

  function unlockBadge(id){
    if(earnedBadges.includes(id)) return;
    earnedBadges.push(id);
    SafeStorage.set("badges",earnedBadges);
    restoreBadges();
  }

  function restoreBadges(){
    document.querySelectorAll(".badge-slot").forEach(b=>{
      if(earnedBadges.includes(b.dataset.badge)) b.classList.add("unlocked");
    });
  }

  /* üîÑ AUTO REFRESH ADDED (ONLY CHANGE) */
  clearBadgesBtn.onclick=()=>{
    SafeStorage.remove("badges");
    earnedBadges.length=0;
    restoreBadges();
    location.reload();
  };

  resetStreakBtn.onclick=()=>{
    currentStreakVal=0;
    bestStreakVal=0;
    SafeStorage.set("currentStreak",0);
    SafeStorage.set("bestStreak",0);
    currentStreak.innerText=0;
    bestStreak.innerText=0;
    location.reload();
  };

  document.addEventListener("visibilitychange",()=>{if(document.hidden) pauseTimer("‚è∏Ô∏è Tab switched click resume");});
  window.addEventListener("blur",()=>pauseTimer("‚è∏Ô∏è App switched click resume"));
  document.addEventListener("fullscreenchange",()=>{if(!document.fullscreenElement) pauseTimer("‚è∏Ô∏è Fullscreen exited click resume");});
</script>

</body>
</html>
